version: 2

sources:
  - name: something
    description: "Source tables from SEC Financial Statement Data"
    database: dbt_db
    schema: dbt_schema
    tables:
      - name: NUM
        description: "Numeric XBRL facts from SEC filings"
        columns:
          - name: adsh
            description: "SEC Accession Number"
            tests:
              - not_null
          - name: tag
            description: "XBRL Tag Identifier"
            tests:
              - not_null
          - name: version
            description: "Tag Taxonomy Version"
          - name: ddate
            description: "Data End Date"
            tests:
              - not_null
              - dbt_expectations.expect_column_to_exist
          - name: qtrs
            description: "Number of Quarters Represented"

      - name: TAG
        description: "XBRL taxonomy tags used in SEC filings"
        columns:
          - name: tag
            description: "XBRL Tag Identifier"
            tests:
              - not_null
              - unique
          - name: version
            description: "Taxonomy version or accession number where tag was defined"
            tests:
              - not_null
        
      - name: PRE
        description: "Presentation data for SEC financial statements"
        columns:
          - name: adsh
            description: "SEC Accession Number"
            tests:
              - not_null
              - relationships:
                  to: source('something', 'NUM')
                  field: adsh
          - name: report
            description: "Report grouping number"
            tests:
              - not_null
          - name: line
            description: "Line order in the report"
            tests:
              - not_null
          - name: stmt
            description: "Financial statement type (BS, IS, CF, etc.)"
            tests:
              - not_null
              - accepted_values:
                  values: ['BS', 'IS', 'CF', 'EQ', 'CI', 'SI', 'UN']
          - name: tag
            description: "XBRL Tag"
            tests:
              - not_null
              - relationships:
                  to: source('something', 'TAG')
                  field: tag
          - name: plabel
            description: "Preferred label for the line item"
            tests:
              - not_null


      - name: RAW_SUB
        description: "SEC submission metadata for financial statements"
        columns:
          - name: adsh
            description: "SEC Accession Number"
            tests:
              - not_null
              - unique
          - name: cik
            description: "Central Index Key for company"
            tests:
              - not_null
          - name: name
            description: "Company legal name"
            tests:
              - not_null
          - name: form
            description: "SEC form type (e.g., 10-K, 10-Q)"
            tests:
              - not_null
          - name: period
            description: "Balance Sheet Date"
            tests:
              - not_null
          - name: fp
            description: "Fiscal Period (Q1, Q2, Q3, Q4, FY)"
            tests:
              - accepted_values:
                  values: ['FY', 'Q1', 'Q2', 'Q3', 'Q4']
          - name: filed
            description: "Date the filing was submitted to SEC"
            tests:
              - not_null
          - name: accepted
            description: "Date and time the filing was accepted by SEC"
            tests:
              - not_null
          - name: prevrpt
            description: "Indicates whether the report is a previous filing (1 = Yes, 0 = No)"
            tests:
              - not_null

